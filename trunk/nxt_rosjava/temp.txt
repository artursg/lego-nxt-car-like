public class nxt_rosjava implements NodeMain {

  private Node node;

  @Override
  public void main(NodeConfiguration configuration) {
    try {
      node = new DefaultNode("nxt_rosjava", configuration);
      final Log log = node.getLog();
      node.createSubscriber("cmd_vel", "geometry_msgs/Twist",
          new MessageListener<org.ros.message.geometry_msgs.Twist>() {
            @Override
            public void onNewMessage(org.ros.message.geometry_msgs.Twist message) {
              log.info("Linear: \"" + message.linear.x + "\"");
            }
          });
    } catch (Exception e) {
      if (node != null) {
        node.getLog().fatal(e);
      } else {
        e.printStackTrace();
      }
    }
  }

  @Override
  public void shutdown() {
    node.shutdown();
  }

}